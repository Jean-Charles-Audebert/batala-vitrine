<%
  // Template: Image Ã  gauche
  // Variables: card, user
  const cardStyles = [];
  if (card.bg_color) cardStyles.push(`background-color: ${card.bg_color}`);
  const cardStyleAttr = cardStyles.length > 0 ? `style="${cardStyles.join('; ')}"` : '';
%>
<article class="card card-image-left" data-card-id="<%= card.id %>" role="listitem" <%- cardStyleAttr %>>
  <% if (card.media_path) { %>
    <div class="card-media">
      <img 
        src="<%= card.media_path %>" 
        alt="<%= card.title %> - <%= card.description ? card.description.substring(0, 100) : 'Illustration' %>"
        loading="lazy"
      >
    </div>
  <% } %>
  <div class="card-content">
    <% if (card.title) { %>
      <h3 
        <% if (card.title_color) { %>
        style="color: <%= card.title_color %>;"
        <% } %>
      ><%= card.title %></h3>
    <% } %>
    <% if (card.description) { %>
      <p
        <% 
          const descStyles = [];
          if (card.description_color) descStyles.push(`color: ${card.description_color}`);
          if (card.description_bg_color && card.description_bg_color !== '#ffffff') {
            descStyles.push(`background-color: ${card.description_bg_color}`, 'padding: 0.75rem', 'border-radius: 4px');
          }
        %>
        <% if (descStyles.length > 0) { %>
        style="<%= descStyles.join('; ') %>;"
        <% } %>
      ><%= card.description %></p>
    <% } %>
  </div>
  <% if (user) { %>
    <div class="card-controls" role="toolbar" aria-label="Actions pour <%= card.title %>">
      <%-
        include('../icon-button', {
          type: 'button',
          className: 'edit-card-btn',
          icon: 'edit',
          ariaLabel: `Modifier la carte ${card.title}`,
          dataAttrs: { 'data-card-id': card.id }
        })
      %>
      <%-
        include('../icon-button', {
          type: 'button',
          className: 'delete-card-btn',
          icon: 'trash',
          ariaLabel: `Supprimer la carte ${card.title}`,
          dataAttrs: { 'data-card-id': card.id }
        })
      %>
    </div>
  <% } %>
</article>
