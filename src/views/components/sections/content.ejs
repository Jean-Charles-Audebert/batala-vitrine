<%
  /**
   * Composant: Section Content
   * Texte avec image (layout flexible: image_left, image_right, centered)
   */
  const {
    id,
    layout = 'image_left',
    bg_color,
    bg_image,
    is_transparent,
    padding_top = 'medium',
    padding_bottom = 'medium',
    content = [],
    decorations = []
  } = section;
  
  const sectionContent = content[0] || {};
  const {
    title: contentTitle,
    description,
    media_url,
    media_type = 'image',
    media_size = 'medium',
    media_alt,
    cta_label,
    cta_url
  } = sectionContent;
  
  const bgStyle = [];
  if (bg_color && !is_transparent) bgStyle.push(`background-color: ${bg_color}`);
  if (bg_image) bgStyle.push(`background-image: url(${bg_image})`);
%>

<section 
  class="section section-content section-content--<%= layout %> padding-top-<%= padding_top %> padding-bottom-<%= padding_bottom %>"
  data-section-id="<%= id %>"
  <% if (bgStyle.length > 0) { %>style="<%= bgStyle.join('; ') %>"<% } %>
>
  <% if (decorations && decorations.length > 0) { %>
    <% decorations.forEach(deco => { %>
      <%- include('../decorations/renderer', { decoration: deco }) %>
    <% }) %>
  <% } %>
  
  <div class="container">
    <div class="content-wrapper">
      <% if (media_url) { %>
        <div class="content-media content-media--<%= media_size %>">
          <div class="media-container">
            <% if (media_type === 'youtube') { %>
              <div class="video-wrapper">
                <iframe 
                  src="<%= media_url.replace('watch?v=', 'embed/').replace('youtu.be/', 'youtube.com/embed/') %>" 
                  frameborder="0" 
                  allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" 
                  allowfullscreen
                ></iframe>
              </div>
            <% } else { %>
              <img src="<%= media_url %>" alt="<%= media_alt || contentTitle || '' %>">
            <% } %>
          </div>
        </div>
      <% } %>
      
      <div class="content-text">
        <% if (contentTitle) { %>
          <h2><%= contentTitle %></h2>
        <% } %>
        <% if (description) { %>
          <p><%= description %></p>
        <% } %>
        <% if (cta_label && cta_url) { %>
          <a href="<%= cta_url %>" class="btn-cta"><%= cta_label %></a>
        <% } %>
      </div>
    </div>
  </div>
  
  <% if (typeof user !== 'undefined' && user) { %>
    <div class="edit-controls">
      <button 
        class="edit-btn" 
        data-section-id="<%= id %>"
        data-action="edit-section"
        aria-label="Modifier la section contenu"
      >
        ✏️
      </button>
    </div>
  <% } %>
</section>