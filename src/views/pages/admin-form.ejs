<%-
  include('../partials/head', {
    title,
    subtitle: 'Batala Vitrine',
    stylesheets: ['/css/admin.css', '/css/buttons.css']
  })
%>
  <div class="admin-container">
    <%-
      include('../partials/admin-toolbar', {
        title,
        toolbarButtons: [
          { href: '/admins', class: 'btn-secondary', icon: 'cancel', label: 'Annuler' }
        ]
      })
    %>

    <%- include('../partials/alerts') %>

    <form method="POST" action="<%= formAction %>" class="form-admin">
      <div class="form-group">
        <label for="email">Email *</label>
        <input 
          type="email" 
          id="email" 
          name="email" 
          value="<%= admin ? admin.email : '' %>" 
          required
          placeholder="admin@example.com"
        >
      </div>

      <div class="form-group">
        <label for="password">
          Mot de passe <%= admin ? '(laisser vide pour ne pas modifier)' : '*' %>
        </label>
        <input 
          type="password" 
          id="password" 
          name="password" 
          <%= admin ? '' : 'required' %>
          placeholder="Minimum 8 caractères"
          minlength="8"
        >
        <small class="form-help">
          Le mot de passe doit contenir au moins 8 caractères, une majuscule, une minuscule, un chiffre et un caractère spécial.
        </small>
      </div>

      <div class="form-group">
        <label class="checkbox-label">
          <input 
            type="checkbox" 
            id="is_active" 
            name="is_active"
            <%= admin && admin.is_active ? 'checked' : '' %>
          >
          Compte actif
        </label>
        <small class="form-help">
          Un compte inactif ne pourra pas se connecter.
        </small>
      </div>

      <div class="form-actions">
        <%- include('../components/icon-button', {
          type: 'submit',
          className: 'btn btn-primary',
          icon: 'save',
          text: admin ? 'Mettre à jour' : 'Créer',
          ariaLabel: admin ? 'Mettre à jour l\'administrateur' : 'Créer l\'administrateur'
        }) %>
        <%- include('../components/icon-button', {
          type: 'a',
          href: '/admins',
          className: 'btn btn-secondary',
          icon: 'cancel',
          text: 'Annuler',
          ariaLabel: 'Annuler et retourner à la liste des administrateurs'
        }) %>
      </div>
    </form>
  </div>
<%- include('../partials/footer') %>
