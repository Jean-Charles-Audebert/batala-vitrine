extends layout

block content
  .blocks-container
    h1= title
    
    if error
      .alert.alert-error= error
    
    if success
      .alert.alert-success= success
    
    .actions
      a.btn.btn-primary(href="/blocks/new") + Ajouter un bloc
      a.btn.btn-secondary(href="/admins") Retour aux admins
    
    if blocks && blocks.length > 0
      table.blocks-table#blocksTable
        thead
          tr
            th Position
            th Type
            th Titre
            th Slug
            th Verrouillé
            th Actions
        tbody
          each block in blocks
            tr(data-id=block.id data-position=block.position)
              td.drag-handle= block.position
              td= block.type
              td= block.title
              td= block.slug
              td= block.is_locked ? 'Oui' : 'Non'
              td.actions
                a.btn.btn-sm.btn-edit(href=`/blocks/${block.id}/edit`) Modifier
                if !block.is_locked
                  form(method="POST" action=`/blocks/${block.id}/delete` style="display:inline")
                    button.btn.btn-sm.btn-delete(type="submit" onclick="return confirm('Confirmer la suppression ?')") Supprimer
    else
      p Aucun bloc trouvé.
    
    style.
      .blocks-container {
        max-width: 1200px;
        margin: 2rem auto;
        padding: 2rem;
      }
      .actions {
        margin-bottom: 1.5rem;
        display: flex;
        gap: 1rem;
      }
      .btn {
        padding: 0.5rem 1rem;
        border: none;
        border-radius: 4px;
        cursor: pointer;
        text-decoration: none;
        display: inline-block;
        font-size: 0.9rem;
      }
      .btn-primary {
        background: #007bff;
        color: white;
      }
      .btn-primary:hover {
        background: #0056b3;
      }
      .btn-secondary {
        background: #6c757d;
        color: white;
      }
      .btn-sm {
        padding: 0.25rem 0.5rem;
        font-size: 0.8rem;
      }
      .btn-edit {
        background: #ffc107;
        color: #000;
      }
      .btn-delete {
        background: #dc3545;
        color: white;
      }
      .blocks-table {
        width: 100%;
        border-collapse: collapse;
      }
      .blocks-table th,
      .blocks-table td {
        padding: 0.75rem;
        text-align: left;
        border-bottom: 1px solid #ddd;
      }
      .blocks-table thead {
        background: #f8f9fa;
      }
      .blocks-table td.actions {
        display: flex;
        gap: 0.5rem;
      }
      .drag-handle {
        cursor: move;
        font-weight: bold;
      }
      .alert {
        padding: 1rem;
        margin-bottom: 1rem;
        border-radius: 4px;
      }
      .alert-error {
        background: #f8d7da;
        color: #721c24;
        border: 1px solid #f5c6cb;
      }
      .alert-success {
        background: #d4edda;
        color: #155724;
        border: 1px solid #c3e6cb;
      }
