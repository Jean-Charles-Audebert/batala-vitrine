extends layout

block content
  .block-form-container
    h1= title
    
    if error
      .alert.alert-error= error
    
    form(method="POST" action=formAction)
      .form-group
        label(for="type") Type de bloc
        select#type(name="type" required disabled=block && block.is_locked)
          option(value="" selected=!block) -- Sélectionnez un type --
          option(value="header" selected=block && block.type === 'header') En-tête
          option(value="actus" selected=block && block.type === 'actus') Actualités
          option(value="offres" selected=block && block.type === 'offres') Offres de services
          option(value="footer" selected=block && block.type === 'footer') Pied de page
          option(value="custom" selected=block && block.type === 'custom') Personnalisé
      
      .form-group
        label(for="title") Titre
        input#title(type="text" name="title" required value=block ? block.title : '' placeholder="Ex: Actualités du groupe")
      
      .form-group
        label(for="slug") Slug (URL-friendly)
        input#slug(type="text" name="slug" required value=block ? block.slug : '' placeholder="Ex: actualites-du-groupe")
        small.text-muted Doit être unique et sans espaces ni caractères spéciaux
      
      .form-group
        label(for="position") Position (ordre d'affichage)
        input#position(type="number" name="position" min="1" value=block ? block.position : 999 placeholder="999")
      
      if block && block.is_locked
        .alert.alert-warning ⚠️ Ce bloc est verrouillé. Vous ne pouvez modifier que le titre et le slug.
      
      .form-actions
        button.btn.btn-primary(type="submit") Enregistrer
        a.btn.btn-secondary(href="/blocks") Annuler
    
    style.
      .block-form-container {
        max-width: 600px;
        margin: 2rem auto;
        padding: 2rem;
        border: 1px solid #ddd;
        border-radius: 8px;
        background: #fff;
      }
      .form-group {
        margin-bottom: 1rem;
      }
      .form-group label {
        display: block;
        margin-bottom: 0.5rem;
        font-weight: bold;
      }
      .form-group input,
      .form-group select {
        width: 100%;
        padding: 0.5rem;
        border: 1px solid #ccc;
        border-radius: 4px;
      }
      .text-muted {
        color: #6c757d;
        font-size: 0.9rem;
      }
      .form-actions {
        display: flex;
        gap: 1rem;
        margin-top: 1.5rem;
      }
      .btn {
        padding: 0.75rem 1.5rem;
        border: none;
        border-radius: 4px;
        cursor: pointer;
        text-decoration: none;
        display: inline-block;
        font-size: 1rem;
      }
      .btn-primary {
        background: #007bff;
        color: white;
      }
      .btn-primary:hover {
        background: #0056b3;
      }
      .btn-secondary {
        background: #6c757d;
        color: white;
      }
      .alert {
        padding: 1rem;
        margin-bottom: 1rem;
        border-radius: 4px;
      }
      .alert-error {
        background: #f8d7da;
        color: #721c24;
        border: 1px solid #f5c6cb;
      }
      .alert-warning {
        background: #fff3cd;
        color: #856404;
        border: 1px solid #ffeeba;
      }
